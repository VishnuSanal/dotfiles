#!/bin/bash

if [ $# == 0 ]; then
    echo '0 -> internal monitor only without polybar'
    echo '1 -> internal monitor only with polybar'
    echo '2 -> external monitor only without polybar'
    echo '3 -> external monitor only with polybar'
    echo '4 -> both monitors without polybar'
    echo '5 -> both monitors with polybar'
    echo '6 -> both monitors with polybar only on internal monitor'

    read -p 'Mode: ' mode
else
    mode=$1
fi

case $mode in

0)
    cp ~/.screenlayout/both.sh ~/.screenlayout/layout.sh
    cp ~/.config/bspwm/internal-hidden ~/.config/bspwm/bspwmrc
    killall -q polybar

    ;;

1)
    cp ~/.screenlayout/both.sh ~/.screenlayout/layout.sh
    cp ~/.config/bspwm/internal-visible ~/.config/bspwm/bspwmrc
    
    ;;
2)
    cp ~/.screenlayout/monitor.sh ~/.screenlayout/layout.sh
    cp ~/.config/bspwm/external-hidden ~/.config/bspwm/bspwmrc
    killall -q polybar

    ;;
3)
    cp ~/.screenlayout/monitor.sh ~/.screenlayout/layout.sh
    cp ~/.config/bspwm/external-visible ~/.config/bspwm/bspwmrc

    ;;
4)
    cp ~/.screenlayout/both.sh ~/.screenlayout/layout.sh
    cp ~/.config/bspwm/both-hidden ~/.config/bspwm/bspwmrc
    killall -q polybar

    ;;

5)
    cp ~/.screenlayout/both.sh ~/.screenlayout/layout.sh
    cp ~/.config/bspwm/both-visible ~/.config/bspwm/bspwmrc

    ;;
    
6)
    cp ~/.screenlayout/both.sh ~/.screenlayout/layout.sh
    cp ~/.config/bspwm/both-internal-visible ~/.config/bspwm/bspwmrc
    killall -q polybar

    ;;
*)
    echo 'Invalid ID'
    exit 1

    ;;

esac

echo $mode > ~/.screenlayout/mode

bspc wm -r
